# Working on plotting two parameter version

source(here::here("r/robustness.r")) # nolint


mean_diff <- 0.3526918
tvalue <- 2.9009
se <- mean_diff / tvalue
std_dev <- se * sqrt(50L)
simdat <- mean_diff + as.numeric(scale(rnorm(50L, 0L, 1L))) * std_dev

data_model <- likelihood("student_t", mean(simdat),
  sd = sd(simdat) / sqrt(length(simdat)), df = length(simdat) - 1L
)

alternative_prior <- prior("normal", mean = 0L, sd = 0.25, range = c(0L, Inf))
null_prior <- prior("point", 0L)
parameters <- list(mean = c(-2L, 2L), sd = c(0L, 2L))
precision <- 0.05

bf_base1 <- integral(data_model * alternative_prior) /
  integral(data_model * null_prior)

suppressWarnings({
  rr <- bfrr(
    data_model = data_model,
    alternative_prior = alternative_prior,
    null_prior = null_prior,
    parameters = parameters,
    precision = precision,
    cutoff = 6L,
    multicore = TRUE
  )
})



parameters <- list(mean = c(-2L, 2L))

suppressWarnings({
  rr <- bfrr(
    data_model = data_model,
    alternative_prior = alternative_prior,
    null_prior = null_prior,
    parameters = parameters,
    precision = precision,
    cutoff = 6L,
    multicore = TRUE
  )
})









